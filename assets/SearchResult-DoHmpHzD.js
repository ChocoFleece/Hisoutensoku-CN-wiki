import{u as W,f as ae,g as se,h as Y,i as te,P as le,t as oe,j as ie,k as P,l as g,m as me,n as N,p as s,q as de,R as O,s as re,v as ne,x as ue,C as ce,y as he,z as ve,A as pe,B as Ae,D as ye,E as Re,F as Se,G as B,H as T,I as Me,J as k,K as Fe}from"./app-DdgswhMD.js";const Qe=["/","/Beginners/BeforePlaying.html","/Beginners/Score.html","/FAQ/tree.html","/FAQ/update.html","/GameGuide/FacingSide.html","/GameGuide/projectiles.html","/GameGuide/weather.html","/about/","/data/","/en/","/mods/PracticeMods.html","/mods/WhatsMod.html","/FAQ/Failed-to-Start/AntiVirus.html","/FAQ/Failed-to-Start/D3D_device.html","/FAQ/Failed-to-Start/DSound.html","/FAQ/Failed-to-Start/EncodingError.html","/FAQ/Failed-to-Start/Linux.html","/FAQ/Failed-to-Start/NoWindow.html","/FAQ/Failed-to-Start/RamnitVirus.html","/FAQ/Failed-to-Start/UAC.html","/FAQ/Failed-to-Start/d3d9_33.html","/FAQ/In-Games/Blurred.html","/FAQ/In-Games/CursedFullscreen.html","/FAQ/In-Games/CursedWindow.html","/FAQ/In-Games/MissingGraphic.html","/FAQ/In-Games/RepNotSaved.html","/FAQ/In-Games/VJoy.html","/FAQ/In-Games/noSFX.html","/FAQ/Others/CHM.html","/FAQ/Others/th123AI.html","/FAQ/Play/AP_NOT_Supported.html","/FAQ/Play/InternationalGame.html","/FAQ/Play/LagPlaying.html","/FAQ/Play/LobbyGuide.html","/FAQ/Play/OfflineGame.html","/FAQ/Play/Spectate.html","/FAQ/Play/WeirdRedirectBug.html","/data/Common/Density.html","/data/Common/","/data/Marisa/","/data/Marisa/intro.html","/data/Reisen/","/data/Reisen/intro.html","/data/Remilia/","/data/Remilia/intro.html","/en/FAQ/update.html","/mods/AdvancedMods/AdvancedPracticeMode.html","/mods/AdvancedMods/BGMChanger.html","/mods/AdvancedMods/Blacklist.html","/mods/AdvancedMods/ChordMacro.html","/mods/AdvancedMods/IPv6Mod.html","/mods/AdvancedMods/InfiniteDeck.html","/mods/AdvancedMods/MemoryPatch.html","/mods/AdvancedMods/ReplayDnD.html","/mods/AdvancedMods/SokuStreaming.html","/mods/AdvancedMods/Trialmode.html","/mods/AdvancedMods/palette-picker.html","/mods/DIY/FramedataEditor.html","/mods/DIY/Modify.html","/mods/DIY/Shady-loader.html","/mods/DIY/StageChanger.html","/mods/GameplayMods/2V2MOD.html","/mods/GameplayMods/AprilFoolWeathers.html","/mods/GameplayMods/AssistSoku.html","/mods/GameplayMods/MoGai.html","/mods/GameplayMods/SOKU2general.html","/mods/GameplayMods/SokuPlus.html","/mods/GameplayMods/TimerMod.html","/mods/GameplayMods/UnlimitedMod.html","/mods/GameplayMods/WeatherWar.html","/mods/GameplayMods/shady-lua.html","/mods/QoLMods/CharactersInForeground.html","/mods/QoLMods/ControlPnP.html","/mods/QoLMods/DPadFix.html","/mods/QoLMods/DSoundFix.html","/mods/QoLMods/NoFocusNoBgm.html","/mods/QoLMods/PunishDisplay.html","/mods/QoLMods/ReplayLabelEx.html","/mods/QoLMods/ReplayResync.html","/mods/QoLMods/SaveRep.html","/mods/QoLMods/ScoreTracker.html","/mods/QoLMods/SkipIntro.html","/mods/QoLMods/TSK.html","/mods/QoLMods/VolumeChanger.html","/data/Marisa/combos/","/data/Marisa/moves/","/data/Marisa/text/","/data/Reisen/combos/","/data/Reisen/moves/","/data/Reisen/text/","/data/Remilia/combos/2A.html","/data/Remilia/combos/3A.html","/data/Remilia/combos/AAA.html","/data/Remilia/combos/CH2A.html","/data/Remilia/combos/CH3A.html","/data/Remilia/combos/","/data/Remilia/combos/Roman.html","/data/Remilia/moves/","/data/Remilia/text/Fuzzy.html","/data/Remilia/text/Gungnir.html","/data/Remilia/text/","/en/FAQ/Failed-to-Start/D3D_device.html","/en/FAQ/Failed-to-Start/DSound.html","/en/FAQ/Failed-to-Start/Linux.html","/en/FAQ/Failed-to-Start/NoWindow.html","/en/FAQ/Failed-to-Start/d3d9_33.html","/en/FAQ/In-Games/MissingGraphic.html","/en/FAQ/In-Games/RepNotSaved.html","/en/FAQ/In-Games/VJoy.html","/data/Marisa/combos/AAA/2532.html","/data/Marisa/combos/AAA/2950.html","/data/Marisa/combos/AAA/","/data/Marisa/moves/Skills/","/data/Marisa/moves/SpellCards/","/data/Marisa/moves/basic/","/data/Marisa/moves/basic/basic.html","/data/Marisa/moves/basic/bullet-air.html","/data/Marisa/moves/basic/bullet.html","/data/Marisa/moves/basic/normal-air.html","/data/Marisa/moves/basic/normal.html","/data/Reisen/combos/5A/2781.html","/data/Reisen/combos/5A/","/data/Reisen/combos/AAA/2106-2227.html","/data/Reisen/combos/AAA/2350-2424.html","/data/Reisen/combos/AAA/2597.html","/data/Reisen/combos/AAA/2753.html","/data/Reisen/combos/AAA/","/data/Reisen/combos/DA/2106-2205.html","/data/Reisen/combos/DA/","/data/Reisen/combos/%E5%8E%9F236/2899.html","/data/Reisen/combos/%E5%8E%9F236/","/data/Reisen/moves/Skills/","/data/Reisen/moves/SpellCards/","/data/Reisen/moves/basic/","/data/Reisen/moves/basic/basic.html","/data/Reisen/moves/basic/bullet-air.html","/data/Reisen/moves/basic/bullet.html","/data/Reisen/moves/basic/normal-air.html","/data/Reisen/moves/basic/normal.html","/data/Remilia/moves/Skills/","/data/Remilia/moves/SpellCards/","/data/Remilia/moves/basic/","/data/Remilia/moves/basic/basic.html","/data/Remilia/moves/basic/bullet-air.html","/data/Remilia/moves/basic/bullet.html","/data/Remilia/moves/basic/normal-air.html","/data/Remilia/moves/basic/normal.html","/data/Marisa/moves/Skills/214/","/data/Marisa/moves/Skills/22/","/data/Marisa/moves/Skills/236/","/data/Marisa/moves/Skills/421/","/data/Marisa/moves/Skills/623/","/data/Marisa/moves/SpellCards/1/","/data/Marisa/moves/SpellCards/2/","/data/Marisa/moves/SpellCards/3/","/data/Marisa/moves/SpellCards/4/","/data/Marisa/moves/SpellCards/5/","/data/Reisen/combos/5A/air/2411.html","/data/Reisen/combos/5A/air/2441-2509-2520.html","/data/Reisen/combos/5A/air/","/data/Reisen/moves/Skills/214/","/data/Reisen/moves/Skills/22/","/data/Reisen/moves/Skills/236/","/data/Reisen/moves/Skills/421/","/data/Reisen/moves/Skills/623/","/data/Reisen/moves/SpellCards/1/","/data/Reisen/moves/SpellCards/2/","/data/Reisen/moves/SpellCards/3/","/data/Reisen/moves/SpellCards/4/","/data/Reisen/moves/SpellCards/5/","/data/Remilia/moves/Skills/214/","/data/Remilia/moves/Skills/22/","/data/Remilia/moves/Skills/236/","/data/Remilia/moves/Skills/421/","/data/Remilia/moves/Skills/623/","/data/Remilia/moves/SpellCards/1/","/data/Remilia/moves/SpellCards/2/","/data/Remilia/moves/SpellCards/3/","/data/Remilia/moves/SpellCards/4/","/data/Remilia/moves/SpellCards/5/","/404.html","/Beginners/","/FAQ/","/GameGuide/","/mods/","/FAQ/Failed-to-Start/","/FAQ/In-Games/","/FAQ/Others/","/FAQ/Play/","/en/FAQ/","/mods/AdvancedMods/","/mods/DIY/","/mods/GameplayMods/","/mods/QoLMods/","/en/FAQ/Failed-to-Start/","/en/FAQ/In-Games/"],be="SEARCH_PRO_QUERY_HISTORY",y=W(be,[]),ge=()=>{const{queryHistoryCount:t}=k,l=t>0;return{enabled:l,queryHistory:y,addQueryHistory:o=>{l&&(y.value=Array.from(new Set([o,...y.value.slice(0,t-1)])))},removeQueryHistory:o=>{y.value=[...y.value.slice(0,o),...y.value.slice(o+1)]}}},x=t=>Qe[t.id]+("anchor"in t?`#${t.anchor}`:""),ke="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:_}=k,R=W(ke,[]),Ce=()=>{const t=_>0;return{enabled:t,resultHistory:R,addResultHistory:l=>{if(t){const o={link:x(l),display:l.display};"header"in l&&(o.header=l.header),R.value=[o,...R.value.slice(0,_-1)]}},removeResultHistory:l=>{R.value=[...R.value.slice(0,l),...R.value.slice(l+1)]}}},Ge=t=>{const l=ce(),o=Y(),C=he(),m=P(0),F=g(()=>m.value>0),v=ve([]);return pe(()=>{const{search:p,terminate:G}=Ae(),S=Me(n=>{const M=n.join(" "),{searchFilter:f=h=>h,splitWord:D,suggestionsFilter:w,...A}=l.value;M?(m.value+=1,p(n.join(" "),o.value,A).then(h=>f(h,M,o.value,C.value)).then(h=>{m.value-=1,v.value=h}).catch(h=>{console.warn(h),m.value-=1,m.value||(v.value=[])})):v.value=[]},k.searchDelay-k.suggestDelay);N([t,o],([n])=>S(n),{immediate:!0}),ye(()=>{G()})}),{isSearching:F,results:v}};var De=ae({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(t,{emit:l}){const o=se(),C=Y(),m=te(le),{enabled:F,addQueryHistory:v,queryHistory:p,removeQueryHistory:G}=ge(),{enabled:S,resultHistory:n,addResultHistory:M,removeResultHistory:f}=Ce(),D=F||S,w=oe(t,"queries"),{results:A,isSearching:h}=Ge(w),i=ie({isQuery:!0,index:0}),u=P(0),c=P(0),E=g(()=>D&&(p.value.length>0||n.value.length>0)),L=g(()=>A.value.length>0),H=g(()=>A.value[u.value]||null),U=()=>{const{isQuery:e,index:a}=i;a===0?(i.isQuery=!e,i.index=e?n.value.length-1:p.value.length-1):i.index=a-1},V=()=>{const{isQuery:e,index:a}=i;a===(e?p.value.length-1:n.value.length-1)?(i.isQuery=!e,i.index=0):i.index=a+1},j=()=>{u.value=u.value>0?u.value-1:A.value.length-1,c.value=H.value.contents.length-1},$=()=>{u.value=u.value<A.value.length-1?u.value+1:0,c.value=0},z=()=>{c.value<H.value.contents.length-1?c.value+=1:$()},J=()=>{c.value>0?c.value-=1:j()},I=e=>e.map(a=>Fe(a)?a:s(a[0],a[1])),K=e=>{if(e.type==="customField"){const a=Re[e.index]||"$content",[d,b=""]=Se(a)?a[C.value].split("$content"):a.split("$content");return e.display.map(r=>s("div",I([d,...r,b])))}return e.display.map(a=>s("div",I(a)))},Q=()=>{u.value=0,c.value=0,l("updateQuery",""),l("close")},X=()=>F?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},m.value.queryHistory),p.value.map((e,a)=>s("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===a}],onClick:()=>{l("updateQuery",e)}},[s(B,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:d=>{d.preventDefault(),d.stopPropagation(),G(a)}})]))])):null,Z=()=>S?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},m.value.resultHistory),n.value.map((e,a)=>s(O,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===a}],onClick:()=>{Q()}},()=>[s(B,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(d=>I(d)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:d=>{d.preventDefault(),d.stopPropagation(),f(a)}})]))])):null;return me("keydown",e=>{if(t.isFocusing){if(L.value){if(e.key==="ArrowUp")J();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const a=H.value.contents[c.value];v(t.queries.join(" ")),M(a),o.push(x(a)),Q()}}else if(S){if(e.key==="ArrowUp")U();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const{index:a}=i;i.isQuery?(l("updateQuery",p.value[a]),e.preventDefault()):(o.push(n.value[a].link),Q())}}}}),N([u,c],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:t.queries.length?!L.value:!E.value}],id:"search-pro-results"},t.queries.length?h.value?s(de,{hint:m.value.searching}):L.value?s("ul",{class:"search-pro-result-list"},A.value.map(({title:e,contents:a},d)=>{const b=u.value===d;return s("li",{class:["search-pro-result-list-item",{active:b}]},[s("div",{class:"search-pro-result-title"},e||m.value.defaultTitle),a.map((r,ee)=>{const q=b&&c.value===ee;return s(O,{to:x(r),class:["search-pro-result-item",{active:q,"aria-selected":q}],onClick:()=>{v(t.queries.join(" ")),M(r),Q()}},()=>[r.type==="text"?null:s(r.type==="title"?re:r.type==="heading"?ne:ue,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[r.type==="text"&&r.header?s("div",{class:"content-header"},r.header):null,s("div",K(r))])])})])})):m.value.emptyResult:D?E.value?[X(),Z()]:m.value.emptyHistory:m.value.emptyResult)}});export{De as default};
