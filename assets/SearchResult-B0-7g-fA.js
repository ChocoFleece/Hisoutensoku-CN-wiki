import{u as V,f as ea,g as sa,h as W,i as ta,P as la,t as oa,j as ia,k as I,l as k,m as ma,n as Y,p as s,q as da,R as O,s as ra,v as na,x as ua,C as ca,y as ha,z as va,A as pa,B as Sa,D as Aa,E as ya,F as Ra,G as B,H as T,I as Ma,J as g,K as Fa}from"./app-C964bGTN.js";const Qa=["/","/Beginners/BeforePlaying.html","/Beginners/Level.html","/Beginners/Score.html","/FAQ/tree.html","/FAQ/update.html","/GameGuide/FacingSide.html","/GameGuide/projectiles.html","/GameGuide/weather.html","/about/","/en/","/mods/PracticeMods.html","/mods/WhatsMod.html","/FAQ/Failed-to-Start/AntiVirus.html","/FAQ/Failed-to-Start/D3D_device.html","/FAQ/Failed-to-Start/DSound.html","/FAQ/Failed-to-Start/EncodingError.html","/FAQ/Failed-to-Start/Linux.html","/FAQ/Failed-to-Start/NoWindow.html","/FAQ/Failed-to-Start/RamnitVirus.html","/FAQ/Failed-to-Start/UAC.html","/FAQ/Failed-to-Start/d3d9_33.html","/FAQ/In-Games/Blurred.html","/FAQ/In-Games/CursedFullscreen.html","/FAQ/In-Games/CursedWindow.html","/FAQ/In-Games/MissingGraphic.html","/FAQ/In-Games/RepNotSaved.html","/FAQ/In-Games/VJoy.html","/FAQ/In-Games/noSFX.html","/FAQ/Others/AntiVirus.html","/FAQ/Others/CHM.html","/FAQ/Others/th123AI.html","/FAQ/Play/AP_NOT_Supported.html","/FAQ/Play/InternationalGame.html","/FAQ/Play/LagPlaying.html","/FAQ/Play/LobbyGuide.html","/FAQ/Play/OfflineGame.html","/FAQ/Play/Spectate.html","/FAQ/Play/WeirdRedirectBug.html","/data/Common/Density.html","/data/Common/","/data/Marisa/","/data/Marisa/intro.html","/data/Reisen/","/data/Reisen/intro.html","/data/Remilia/","/data/Remilia/intro.html","/data/Suwako/","/data/Suwako/intro.html","/en/FAQ/update.html","/en/mods/PracticeMods.html","/mods/AdvancedMods/AdvancedPracticeMode.html","/mods/AdvancedMods/BGMChanger.html","/mods/AdvancedMods/Blacklist.html","/mods/AdvancedMods/ChordMacro.html","/mods/AdvancedMods/IPv6Mod.html","/mods/AdvancedMods/InfiniteDeck.html","/mods/AdvancedMods/MemoryPatch.html","/mods/AdvancedMods/ReplayDnD.html","/mods/AdvancedMods/SokuStreaming.html","/mods/AdvancedMods/Trialmode.html","/mods/AdvancedMods/palette-picker.html","/mods/DIY/FramedataEditor.html","/mods/DIY/Modify.html","/mods/DIY/Shady-loader.html","/mods/DIY/StageChanger.html","/mods/GameplayMods/2V2MOD.html","/mods/GameplayMods/AprilFoolWeathers.html","/mods/GameplayMods/AssistSoku.html","/mods/GameplayMods/MoGai.html","/mods/GameplayMods/SOKU2general.html","/mods/GameplayMods/SokuPlus.html","/mods/GameplayMods/TimerMod.html","/mods/GameplayMods/UnlimitedMod.html","/mods/GameplayMods/WeatherWar.html","/mods/GameplayMods/shady-lua.html","/mods/QoLMods/CharactersInForeground.html","/mods/QoLMods/ControlPnP.html","/mods/QoLMods/DPadFix.html","/mods/QoLMods/DSoundFix.html","/mods/QoLMods/NoFocusNoBgm.html","/mods/QoLMods/PunishDisplay.html","/mods/QoLMods/ReplayLabelEx.html","/mods/QoLMods/ReplayResync.html","/mods/QoLMods/SaveRep.html","/mods/QoLMods/ScoreTracker.html","/mods/QoLMods/SkipIntro.html","/mods/QoLMods/TSK.html","/mods/QoLMods/VolumeChanger.html","/data/Marisa/combos/","/data/Marisa/moves/","/data/Marisa/text/","/data/Reisen/combos/","/data/Reisen/moves/","/data/Reisen/text/","/data/Remilia/combos/2A.html","/data/Remilia/combos/3A.html","/data/Remilia/combos/AAA.html","/data/Remilia/combos/CH2A.html","/data/Remilia/combos/CH3A.html","/data/Remilia/combos/","/data/Remilia/combos/Roman.html","/data/Remilia/moves/","/data/Remilia/text/Fuzzy.html","/data/Remilia/text/Gungnir.html","/data/Remilia/text/","/data/Suwako/combos/","/data/Suwako/moves/","/data/Suwako/text/","/data/Suwako/text/tutorial1.html","/en/FAQ/Failed-to-Start/D3D_device.html","/en/FAQ/Failed-to-Start/DSound.html","/en/FAQ/Failed-to-Start/Linux.html","/en/FAQ/Failed-to-Start/NoWindow.html","/en/FAQ/Failed-to-Start/d3d9_33.html","/en/FAQ/In-Games/MissingGraphic.html","/en/FAQ/In-Games/RepNotSaved.html","/en/FAQ/In-Games/VJoy.html","/data/Marisa/combos/AAA/2532.html","/data/Marisa/combos/AAA/2950.html","/data/Marisa/combos/AAA/","/data/Marisa/moves/Skills/","/data/Marisa/moves/SpellCards/","/data/Marisa/moves/basic/","/data/Marisa/moves/basic/basic.html","/data/Marisa/moves/basic/bullet-air.html","/data/Marisa/moves/basic/bullet.html","/data/Marisa/moves/basic/normal-air.html","/data/Marisa/moves/basic/normal.html","/data/Reisen/combos/5A/2781.html","/data/Reisen/combos/5A/","/data/Reisen/combos/AAA/2106-2227.html","/data/Reisen/combos/AAA/2350-2424.html","/data/Reisen/combos/AAA/2597.html","/data/Reisen/combos/AAA/2753.html","/data/Reisen/combos/AAA/","/data/Reisen/combos/DA/2106-2205.html","/data/Reisen/combos/DA/","/data/Reisen/combos/%E5%8E%9F236/2899.html","/data/Reisen/combos/%E5%8E%9F236/","/data/Reisen/moves/Skills/","/data/Reisen/moves/SpellCards/","/data/Reisen/moves/basic/","/data/Reisen/moves/basic/basic.html","/data/Reisen/moves/basic/bullet-air.html","/data/Reisen/moves/basic/bullet.html","/data/Reisen/moves/basic/normal-air.html","/data/Reisen/moves/basic/normal.html","/data/Remilia/moves/Skills/","/data/Remilia/moves/SpellCards/","/data/Remilia/moves/basic/","/data/Remilia/moves/basic/basic.html","/data/Remilia/moves/basic/bullet-air.html","/data/Remilia/moves/basic/bullet.html","/data/Remilia/moves/basic/normal-air.html","/data/Remilia/moves/basic/normal.html","/data/Suwako/moves/Skills/","/data/Suwako/moves/SpellCards/","/data/Suwako/moves/basic/","/data/Suwako/moves/basic/basic.html","/data/Suwako/moves/basic/bullet-air.html","/data/Suwako/moves/basic/bullet.html","/data/Suwako/moves/basic/normal-air.html","/data/Suwako/moves/basic/normal.html","/data/Marisa/moves/Skills/214/","/data/Marisa/moves/Skills/22/","/data/Marisa/moves/Skills/236/","/data/Marisa/moves/Skills/421/","/data/Marisa/moves/Skills/623/","/data/Marisa/moves/SpellCards/1/","/data/Marisa/moves/SpellCards/2/","/data/Marisa/moves/SpellCards/3/","/data/Marisa/moves/SpellCards/4/","/data/Marisa/moves/SpellCards/5/","/data/Reisen/combos/5A/air/2411.html","/data/Reisen/combos/5A/air/2441-2509-2520.html","/data/Reisen/combos/5A/air/","/data/Reisen/moves/Skills/214/","/data/Reisen/moves/Skills/22/","/data/Reisen/moves/Skills/236/","/data/Reisen/moves/Skills/421/","/data/Reisen/moves/Skills/623/","/data/Reisen/moves/SpellCards/1/","/data/Reisen/moves/SpellCards/2/","/data/Reisen/moves/SpellCards/3/","/data/Reisen/moves/SpellCards/4/","/data/Reisen/moves/SpellCards/5/","/data/Remilia/moves/Skills/214/","/data/Remilia/moves/Skills/22/","/data/Remilia/moves/Skills/236/","/data/Remilia/moves/Skills/421/","/data/Remilia/moves/Skills/623/","/data/Remilia/moves/SpellCards/1/","/data/Remilia/moves/SpellCards/2/","/data/Remilia/moves/SpellCards/3/","/data/Remilia/moves/SpellCards/4/","/data/Remilia/moves/SpellCards/5/","/data/Suwako/moves/Skills/214/","/data/Suwako/moves/Skills/22/","/data/Suwako/moves/Skills/236/","/data/Suwako/moves/Skills/421/","/data/Suwako/moves/Skills/623/","/data/Suwako/moves/SpellCards/1/","/data/Suwako/moves/SpellCards/2/","/data/Suwako/moves/SpellCards/3/","/data/Suwako/moves/SpellCards/4/","/data/Suwako/moves/SpellCards/5/","/404.html","/Beginners/","/FAQ/","/GameGuide/","/mods/","/FAQ/Failed-to-Start/","/FAQ/In-Games/","/FAQ/Others/","/FAQ/Play/","/data/","/en/FAQ/","/en/mods/","/mods/AdvancedMods/","/mods/DIY/","/mods/GameplayMods/","/mods/QoLMods/","/en/FAQ/Failed-to-Start/","/en/FAQ/In-Games/"],ba="SEARCH_PRO_QUERY_HISTORY",A=V(ba,[]),ka=()=>{const{queryHistoryCount:t}=g,l=t>0;return{enabled:l,queryHistory:A,addQueryHistory:o=>{l&&(A.value=Array.from(new Set([o,...A.value.slice(0,t-1)])))},removeQueryHistory:o=>{A.value=[...A.value.slice(0,o),...A.value.slice(o+1)]}}},P=t=>Qa[t.id]+("anchor"in t?`#${t.anchor}`:""),ga="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:_}=g,y=V(ga,[]),Ca=()=>{const t=_>0;return{enabled:t,resultHistory:y,addResultHistory:l=>{if(t){const o={link:P(l),display:l.display};"header"in l&&(o.header=l.header),y.value=[o,...y.value.slice(0,_-1)]}},removeResultHistory:l=>{y.value=[...y.value.slice(0,l),...y.value.slice(l+1)]}}},wa=t=>{const l=ca(),o=W(),C=ha(),m=I(0),F=k(()=>m.value>0),v=va([]);return pa(()=>{const{search:p,terminate:w}=Sa(),R=Ma(n=>{const M=n.join(" "),{searchFilter:G=h=>h,splitWord:f,suggestionsFilter:x,...S}=l.value;M?(m.value+=1,p(n.join(" "),o.value,S).then(h=>G(h,M,o.value,C.value)).then(h=>{m.value-=1,v.value=h}).catch(h=>{console.warn(h),m.value-=1,m.value||(v.value=[])})):v.value=[]},g.searchDelay-g.suggestDelay);Y([t,o],([n])=>R(n),{immediate:!0}),Aa(()=>{w()})}),{isSearching:F,results:v}};var fa=ea({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(t,{emit:l}){const o=sa(),C=W(),m=ta(la),{enabled:F,addQueryHistory:v,queryHistory:p,removeQueryHistory:w}=ka(),{enabled:R,resultHistory:n,addResultHistory:M,removeResultHistory:G}=Ca(),f=F||R,x=oa(t,"queries"),{results:S,isSearching:h}=wa(x),i=ia({isQuery:!0,index:0}),u=I(0),c=I(0),E=k(()=>f&&(p.value.length>0||n.value.length>0)),D=k(()=>S.value.length>0),L=k(()=>S.value[u.value]||null),N=()=>{const{isQuery:a,index:e}=i;e===0?(i.isQuery=!a,i.index=a?n.value.length-1:p.value.length-1):i.index=e-1},U=()=>{const{isQuery:a,index:e}=i;e===(a?p.value.length-1:n.value.length-1)?(i.isQuery=!a,i.index=0):i.index=e+1},j=()=>{u.value=u.value>0?u.value-1:S.value.length-1,c.value=L.value.contents.length-1},$=()=>{u.value=u.value<S.value.length-1?u.value+1:0,c.value=0},z=()=>{c.value<L.value.contents.length-1?c.value+=1:$()},J=()=>{c.value>0?c.value-=1:j()},H=a=>a.map(e=>Fa(e)?e:s(e[0],e[1])),K=a=>{if(a.type==="customField"){const e=ya[a.index]||"$content",[d,b=""]=Ra(e)?e[C.value].split("$content"):e.split("$content");return a.display.map(r=>s("div",H([d,...r,b])))}return a.display.map(e=>s("div",H(e)))},Q=()=>{u.value=0,c.value=0,l("updateQuery",""),l("close")},X=()=>F?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},m.value.queryHistory),p.value.map((a,e)=>s("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===e}],onClick:()=>{l("updateQuery",a)}},[s(B,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},a),s("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:d=>{d.preventDefault(),d.stopPropagation(),w(e)}})]))])):null,Z=()=>R?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},m.value.resultHistory),n.value.map((a,e)=>s(O,{to:a.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===e}],onClick:()=>{Q()}},()=>[s(B,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[a.header?s("div",{class:"content-header"},a.header):null,s("div",a.display.map(d=>H(d)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:d=>{d.preventDefault(),d.stopPropagation(),G(e)}})]))])):null;return ma("keydown",a=>{if(t.isFocusing){if(D.value){if(a.key==="ArrowUp")J();else if(a.key==="ArrowDown")z();else if(a.key==="Enter"){const e=L.value.contents[c.value];v(t.queries.join(" ")),M(e),o.push(P(e)),Q()}}else if(R){if(a.key==="ArrowUp")N();else if(a.key==="ArrowDown")U();else if(a.key==="Enter"){const{index:e}=i;i.isQuery?(l("updateQuery",p.value[e]),a.preventDefault()):(o.push(n.value[e].link),Q())}}}}),Y([u,c],()=>{var a;(a=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||a.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:t.queries.length?!D.value:!E.value}],id:"search-pro-results"},t.queries.length?h.value?s(da,{hint:m.value.searching}):D.value?s("ul",{class:"search-pro-result-list"},S.value.map(({title:a,contents:e},d)=>{const b=u.value===d;return s("li",{class:["search-pro-result-list-item",{active:b}]},[s("div",{class:"search-pro-result-title"},a||m.value.defaultTitle),e.map((r,aa)=>{const q=b&&c.value===aa;return s(O,{to:P(r),class:["search-pro-result-item",{active:q,"aria-selected":q}],onClick:()=>{v(t.queries.join(" ")),M(r),Q()}},()=>[r.type==="text"?null:s(r.type==="title"?ra:r.type==="heading"?na:ua,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[r.type==="text"&&r.header?s("div",{class:"content-header"},r.header):null,s("div",K(r))])])})])})):m.value.emptyResult:f?E.value?[X(),Z()]:m.value.emptyHistory:m.value.emptyResult)}});export{fa as default};
